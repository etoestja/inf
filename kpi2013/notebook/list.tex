\documentclass{article}
\usepackage[a4paper, left=5mm, right=5mm, top=10mm, bottom=20mm]{geometry}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{indentfirst}
\usepackage{amsmath}
\usepackage{amsfonts}
\title{Team Notebook}
\author{ВВС}
\date{}
\begin{document}
\maketitle
\section{Z-функция}
\lstset{language=C++}
\begin{lstlisting}
vector<int> calc_z (const char * s){
 vector<int> z;
 int len = strlen(s);
 z.resize (len);
 z[0] = len;
 int l = 0, r = 0;
 int j;
 for (int i = 1; i < len; i++)
  if (i > r){
   for (j = 0; ((j + i) < len) && (s[i + j] == s[j]) ; j++);
   z[i] = j;
   l = i;
   r = i + j - 1;
  }
  else if (z[i - l] < r - i + 1)
   z[i] = z[i - l];
   else{
    for (j = 1; (s[r + j] == s[r - i + j]) && ((j+r) < len); j++);
    z[i] = r - i + j;
    l = i;
    r = r + j - 1;
   }
 return z;
}
\end{lstlisting}
\end{document}
